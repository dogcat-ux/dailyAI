# DailyAI - Product Requirements Document (PRD)

## 1. 产品概述 (Product Overview)

**DailyAI** 是一款基于大语言模型（LLM）的“对话即交互” (Chat-first) 个人生活管理应用。它摒弃了传统繁琐的表单输入，用户只需像和朋友聊天一样发送文字或语音，系统即可自动识别意图，将信息分发给背后的“日记 Agent”或“记账 Agent”，完成数据的结构化存储与分析。

**核心理念：**

- **Natural (自然)**: 用最自然的语言交互，降低记录门槛。
- **Intelligent (智能)**: 自动提取关键信息，自动分类，自动分析情感。
- **Integrated (融合)**: 所有的记录都在一个 Timeline 中，通过 AI 将碎片化的生活串联起来。

---

## 2. 功能模块 (Functional Modules)

### 2.1 统一对话入口 (Unified Chat Interface)

- **描述**: 类似微信/ChatGPT 的对话界面，是用户操作的唯一主要入口。
- **功能**:
  - 支持文本输入（未来可扩展语音）。
  - **智能意图识别**: 系统自动判断用户是在“碎碎念写日记”还是在“记录一笔消费”。
  - **混合指令处理**: 支持一句话包含两种意图（例如：“今天心情不错，去星巴克花了 35 元喝咖啡” -> 同时生成日记和账单）。

### 2.2 智能路由 Agent (Router Agent)

- **描述**: 作为系统的“大脑前额叶”，负责分发任务。
- **逻辑**:
  - 接收用户输入。
  - 分析语义。
  - 调用 `Journal Agent` 或 `Accounting Agent`。
  - 若无法识别，则作为普通 Chatbot 进行闲聊回复。

### 2.3 日记记录 Agent (Journal Agent)

- **描述**: 负责情感陪伴与生活记录。
- **核心能力**:
  - **情感分析**: 分析用户文字背后的情绪（快乐、焦虑、平静等），并打分。
  - **自动标签**: 根据内容提取关键词（如：#工作、#旅行、#美食）。
  - **摘要生成**: 将长篇大论的碎碎念总结为一句话标题。
  - **回应机制**: 记录成功后，给予共情性的简短回复，而不是冷冰冰的“保存成功”。

### 2.4 每日记账 Agent (Accounting Agent)

- **描述**: 负责财务数据的结构化提取。
- **核心能力**:
  - **要素提取**: 自动识别 `金额`、`币种`、`交易对象/商户`、`时间`。
  - **智能分类**: 根据商户名或描述自动归类（如：餐饮、交通、购物）。
  - **缺失追问**: 如果信息不全（例如只说了“花了 50 元”但没说干嘛），Agent 会反问“这 50 元是买了什么呢？”。
  - **多币种支持**: (V2 阶段) 支持汇率转换。

### 2.5 数据回顾与看板 (Dashboard & Review)

- **描述**: 虽然输入是对话式的，但查看需要结构化。
- **功能**:
  - **日记流**: 按时间轴展示日记卡片。
  - **账单明细**: 传统的月度账单列表。
  - **统计图表**: 当月支出饼图、情绪波动曲线。

---

## 3. 用户体验流程 (User Journey)

1.  **用户打开 App**: 直接进入聊天界面。
2.  **用户输入**: "刚才打车回家花了 30 块，司机师傅人很好，聊了一路，原本郁闷的心情好多了。"
3.  **系统处理 (Loading)**:
    - Router 识别到包含 **消费** 和 **情感表达**。
    - **Accounting Agent**: 提取 `支出: 30元`, `分类: 交通`, `备注: 打车回家`。
    - **Journal Agent**: 提取 `心情: 变好/开心`, `内容: 司机聊天治愈心情`。
4.  **系统回复**:
    - 展示一张 **记账卡片** (￥ 30 交通 | 待确认)。
    - 发送一条 **文字回复**: “有时候陌生人的善意真的很治愈呢！账单我帮你记下了，早点休息。”
5.  **用户确认**: 用户点击卡片上的“确认”或直接回复“好的”，数据写入数据库。

---

## 4. 移动端特性 (Mobile Specifics - iOS)

- **极简设计**: 除去聊天框，底部只有简单的 Dashboard 入口。
- **触觉反馈**: 发送成功和记录成功时的 Haptic Feedback。
- **离线优化**: 弱网环境下允许先发送，本地暂存，网络恢复后同步处理。
